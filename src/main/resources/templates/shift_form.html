<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title th:text="${shift.id == null} ? 'ثبت گزارش جدید' : 'ویرایش گزارش'">فرم گزارش</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet" />
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: #f8f9fa;
        }


        label {
            font-weight: bold;
        }

        input[readonly] {
            background-color: #e9ecef;
        }
    </style>
</head>
<body>

<div class="container mt-5">
    <div class="text-end mb-4">
        <h3 th:if="${shift.id == null}">ثبت گزارش جدید</h3>
        <h3 th:unless="${shift.id == null}">ویرایش گزارش شماره <span th:text="${shift.id}"></span></h3>
    </div>

    <form th:action="@{/shift/save}" th:object="${shift}" method="post" class="row g-3">

        <input type="hidden" th:field="*{id}" />
        <input type="hidden" th:field="*{operatorName}" />

        <div class="col-md-6">
            <label for="startTime" class="form-label">زمان شروع</label>
            <input type="datetime-local" id="startTime" class="form-control"
                   th:field="*{startTime}"
                   th:readonly="${shift.id != null}" required />
        </div>

        <div class="col-md-6">
            <label for="endTime" class="form-label">زمان پایان</label>
            <input type="datetime-local" id="endTime" class="form-control"
                   th:field="*{endTime}"
                   th:readonly="${shift.id != null}" required />
        </div>

        <div class="col-md-4">
            <label for="powerGenerated" class="form-label">توان تولیدی (کیلووات ساعت)</label>
            <input type="number" step="0.01" id="powerGenerated" class="form-control" th:field="*{powerGenerated}" required />
        </div>

        <div class="col-md-4">
            <label for="gasConsumed" class="form-label">مصرف گاز (متر مکعب)</label>
            <input type="number" step="0.01" id="gasConsumed" class="form-control" th:field="*{gasConsumed}" required />
        </div>

        <div class="col-md-4">
            <label for="efficiency" class="form-label">راندمان (%)</label>
            <input type="number" step="0.01" id="efficiency" name="efficiency"
                   class="form-control"
                   th:value="${shift.efficiency != null} ? ${shift.efficiency * 100} : ''"
                   required />
        </div>

        <div class="col-md-4">
            <label for="durationMinutes" class="form-label">مدت زمان (دقیقه)</label>
            <input type="number" id="durationMinutes" class="form-control" th:field="*{durationMinutes}" required />
        </div>

        <div class="col-md-8">
            <label class="form-label">نام اپراتور</label>
            <input type="text" class="form-control" th:value="${shift.operatorName}" readonly />
        </div>

        <div class="col-12 mt-4 text-end">
            <button type="submit" class="btn btn-primary" th:text="${shift.id == null} ? 'ثبت گزارش' : 'ویرایش گزارش'">ثبت</button>

            <a th:href="@{/shift/my}" class="btn btn-secondary" th:if="${shift.id == null}">↩ بازگشت</a>
            <a th:href="@{/shift/list}" class="btn btn-secondary" th:unless="${shift.id == null}">↩ بازگشت</a>
        </div>
    </form>
</div>

</body>
</html>
